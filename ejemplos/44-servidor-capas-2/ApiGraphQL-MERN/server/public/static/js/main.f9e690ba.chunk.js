(this["webpackJsonpmi-proyecto-noticias"]=this["webpackJsonpmi-proyecto-noticias"]||[]).push([[0],{1551:function(t,e,a){"use strict";a.r(e);var n=a(4),i=a.n(n),r=a(30),c=a.n(r),s=(a(39),a(40),a(7)),o=a(2),l=a.n(o),u=a(5),d=a(31),p=a(32),b=a(34),j=a(33),h=(a(42),a(0));var m=function(t){var e=t.noticia,a=t.marcarLeida,n=t.borrar,i=t.index;return Object(h.jsx)("div",{className:"Noticia",style:{opacity:e.vista?"0.5":"1"},children:Object(h.jsxs)("div",{className:"media alert alert-primary my-4",children:[Object(h.jsx)("img",{src:e.imagen,style:{width:"350px",borderRadius:"15px"},alt:e.title}),Object(h.jsxs)("div",{className:"media-body ml-4",children:[Object(h.jsx)("button",{className:"btn btn-warning float-right",onClick:function(){return a(e._id)},children:Object(h.jsx)("i",{className:"fab fa-readme",children:" Leida"})}),Object(h.jsx)("button",{className:"btn btn-danger float-left",onClick:function(){return n(e._id)},children:Object(h.jsx)("i",{className:"far fa-trash-alt",children:" Borrar"})}),Object(h.jsx)("h3",{className:"text-center font-italic text-uppercase",children:Object(h.jsxs)("u",{children:["Noticia Nro. ",i+1]})}),Object(h.jsx)("br",{}),Object(h.jsx)("h3",{children:e.titulo}),Object(h.jsx)("p",{children:Object(h.jsx)("i",{children:e.cuerpo})}),Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:e.autor})}),Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:Object(h.jsx)("i",{children:e.email})})}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"ID: "}),Object(h.jsx)("i",{children:e._id})]})]})]})})},f=a(6),v=a.n(f),x=(a(62),a(3)),O=a.n(x);O.a.locale="es";var N=function(){return{titulo:O.a.hacker.phrase(),cuerpo:O.a.lorem.paragraph(),autor:O.a.name.findName(),imagen:O.a.image.avatar(),email:O.a.internet.email(),vista:!1}},g="/noticias/",y=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(){var t;Object(d.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={noticias:[],idObtenerNoticia:"",pedidas:!1},t}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"obtenerNoticias",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var a,n,i,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={query:"\n                    query {\n                        noticias".concat(e?'(_id: "'+e+'")':""," {\n                            _id\n                            titulo\n                            cuerpo\n                            imagen\n                            email\n                            vista\n                        }\n                    }\n                "),variables:{}},n={headers:{"Content-Type":"application/json"}},t.next=5,v.a.post(g,a,n);case 5:i=t.sent,r=i.data.data.noticias,this.setState({noticias:r||[]}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),this.setState({noticias:[]});case 14:this.setState({pedidas:!0,idObtenerNoticia:""});case 15:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"incorporarNoticia",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,a,n,i,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=N(),a={query:"\n                    mutation guardarNoticia($titulo: String!,$cuerpo: String!,$autor: String!,$imagen: String!,$email: String!,$vista: Boolean!) {\n                        guardarNoticia( titulo: $titulo,cuerpo: $cuerpo, autor: $autor,imagen: $imagen, email: $email, vista: $vista){\n                            _id\n                            titulo\n                            cuerpo\n                            autor\n                            imagen\n                            email\n                            vista\n                        }\n                    }\n                ",variables:e},n={headers:{"Content-Type":"application/json"}},t.next=6,v.a.post(g,a,n);case 6:i=t.sent,r=i.data.data.guardarNoticia,(c=Object(s.a)(this.state.noticias)).push(r),this.setState({noticias:c}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("incorporarNoticia",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"actualizarComoLeida",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var a,n,i,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={query:"\n                    mutation actualizarNoticia($_id: String!,$vista: Boolean!) {\n                        actualizarNoticia( _id: $_id, vista: $vista){\n                            _id\n                            titulo\n                            cuerpo\n                            autor\n                            imagen\n                            email\n                            vista\n                        }\n                    }\n                ",variables:{_id:e,vista:!0}},n={headers:{"Content-Type":"application/json"}},t.next=5,v.a.post(g,a,n);case 5:i=t.sent,r=i.data.data.actualizarNoticia,console.log(r),(c=Object(s.a)(this.state.noticias)).find((function(t){return t._id===e})).vista=!0,this.setState({noticias:c}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"borrarNoticia",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var a,n,i,r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={query:"\n                    mutation borrarNoticia($_id: String!) {\n                        borrarNoticia( _id: $_id){\n                            _id\n                            titulo\n                            cuerpo\n                            autor\n                            imagen\n                            email\n                            vista\n                        }\n                    }\n                ",variables:{_id:e}},n={headers:{"Content-Type":"application/json"}},t.next=5,v.a.post(g,a,n);case 5:i=t.sent,r=i.data.data.borrarNoticia,console.log(r),c=Object(s.a)(this.state.noticias),o=c.findIndex((function(t){return t._id===e})),c.splice(o,1),this.setState({noticias:c}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("borrarNoticia",t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,a=e.noticias,n=e.idObtenerNoticia,i=e.pedidas;return Object(h.jsx)("div",{className:"Noticias",children:Object(h.jsx)("div",{className:"container mt-3",children:Object(h.jsxs)("div",{className:"jumbotron",children:[Object(h.jsx)("h1",{children:"Mis Noticias - API GRAPHQL"}),Object(h.jsx)("hr",{}),Object(h.jsx)("button",{className:"btn btn-info my-3 float-left",onClick:function(){return t.obtenerNoticias(n)},children:Object(h.jsx)("i",{className:"fas fa-file-alt",children:" Obtener"})}),Object(h.jsx)("input",{value:n,className:"mt-3 ml-1 form-control w-25 float-left",onChange:function(e){return t.setState({idObtenerNoticia:e.target.value})},placeholder:"todas \xf3 ingrese ID",type:"text"}),Object(h.jsx)("button",{className:"btn btn-success my-3 float-right",onClick:function(){return t.incorporarNoticia()},children:Object(h.jsx)("i",{className:"fas fa-envelope-open-text",children:" Generar"})}),Object(h.jsx)("div",{className:"clearfix"}),!a.length&&i&&Object(h.jsx)("h3",{className:"alert alert-danger",children:"No hay noticias para mostrar"}),a.map((function(e,a){return Object(h.jsx)(m,{noticia:e,index:a,marcarLeida:function(e){return t.actualizarComoLeida(e)},borrar:function(e){return t.borrarNoticia(e)}},e._id)}))]})})})}}]),a}(i.a.Component);var k=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(y,{})})};c.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root"))},39:function(t,e,a){},40:function(t,e,a){},42:function(t,e,a){},62:function(t,e,a){}},[[1551,1,2]]]);
//# sourceMappingURL=main.f9e690ba.chunk.js.map